<%
  javascript "underscore"
  javascript "backbone"
  javascript "recipes/edit"
  stylesheet "recipes/edit"
%>

<script type="text/javascript">
  var recipe = new Recipe(<%= raw @recipe.to_json %>);
</script>

<div id="app">
  <div id="recipe"></div>
  <div id="new_direction"></div>
  <div id="directions"></div>
  <div id="new_ingredient"></div>
  <div id="ingredients"></div>
</div>

<script type="text/template" id="edit_recipe_template">
  <div class="field">
    <label for="name">Name</label>
    <br/>
    <input type="text" name="name" id="name" value="{{ name }}" />
  </div>
  <div class="field">
    <label for="description">Description</label>
    <br/>
    <textarea type="text" name="description" id="description">{{ description }}</textarea>
  </div>
  <div class="field">
    <label for="servings">Servings</label>
    <br/>
    <input type="text" name="servings" id="servings" value="{{ servings }}"/>
  </div>
  <div class="actions">
    <input type="submit" name="submit" id="save" value="Save Recipe" />
  </div>
</script>

<script type="text/template" id="direction_template">
  <div class="view">
    <span class="text">{{ text }}</span><div class="operations"><a class="edit_link">edit</a><a class="delete_link">delete</a></div>
  </div>
  <div class="edit">
    <textarea class="text">{{ text }}</textarea>
    <button class="save">Save</button>
    <a href="#" class="cancel">Cancel</a>
  </div>
</script>

<script type="text/template" id="ingredient_template">
  <div class="view">
    <span class="how_much">{{ how_much }}</span>
    <span class="ingredient_name">{{ ingredient_name }}</span>
    <span class="preparation">{{ preparation }}</span>
    <div class="operations">
      <a class="edit_link">edit</a>
      <a class="delete_link">delete</a>
    </div>
  </div>
  <div class="edit">
    <input type="text" placeholder="How much?" class="how_much" value="{{ how_much }}"/>
    <input type="text" placeholder="Ingredient" class="ingredient_name" value="{{ ingredient_name }}" />
    <input type="text" placeholder="Preparation" class="preparation" value="{{ preparation }}"/>
    <button class="save">Save</button>
    <a href="#" class="cancel">Cancel</a>
  </div>
</script>

<script type="text/template" id="new_direction_template">
  <textarea class="text"></textarea>
  <button class="save">Save</button>
  <a href="#" class="cancel">Cancel</a>
</script>

<script type="text/template" id="new_ingredient_template">
  <input type="text" placeholder="How much?" class="how_much" />
  <input type="text" placeholder="Ingredient" class="ingredient_name" />
  <input type="text" placeholder="Preparation" class="preparation" />
  <button class="save">Save</button>
  <a href="#" class="cancel">Cancel</a>
</script>
