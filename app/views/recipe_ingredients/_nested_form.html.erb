<div id="ingredients">  
  <div id="ingredient_form">
    <input type="text" id="how_much" placeholder="1 1/2 tbsps"/>
    <input type="text" id="ingredient_name" placeholder="ingredient" />
    <input type="text" id="preparation" placeholder="preparation"/>
    <button id="add_ingredient">Add</button>
  </div>

  <%= form.fields_for :ingredients do |ingredient_form| %>
  <div class="ingredient <%= 'new' if ingredient_form.object.new_record? %>">
    <% unless ingredient_form.object.new_record? %>
      <%= ingredient_form.check_box :_destroy, :class => "destroy" %>
    <% end %>
    <%= ingredient_form.text_field :how_much, :size => "" %>
    <%= ingredient_form.text_field :ingredient_name, :size => "" %>
    <%= ingredient_form.text_field :preparation, :size => "" %>
    <%= ingredient_form.text_field :order, :class => "order" %>
  </div>
  <% end %>
</div>

<script id="new_ingredient_template" type="text/template">
  <div class="ingredient new">
    <input id="recipe_ingredients_attributes_{{i}}_how_much" name="recipe[ingredients_attributes][{{i}}][how_much]" type="text" value="{{how_much}}" />
    <input id="recipe_ingredients_attributes_{{i}}_ingredient_name" name="recipe[ingredients_attributes][{{i}}][ingredient_name]" type="text" value="{{ingredient_name}}" />
    <input id="recipe_ingredients_attributes_{{i}}_preparation" name="recipe[ingredients_attributes][{{i}}][preparation]" type="text" value="{{preparation}}" />
    <input id="recipe_ingredients_attributes_{{i}}_order" name="recipe[ingredients_attributes][{{i}}[order]" type="text" value="{{order}}" class="order" />
  </div>
</script>
